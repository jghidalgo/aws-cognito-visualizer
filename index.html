<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AWS Cognito Authentication Visualizer</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>AWS Cognito Authentication Flow</h1>
            <p>Interactive visualization of user authentication, user pools, and identity pools</p>
        </header>

        <div class="controls">
            <button id="signUpBtn" class="btn primary">Sign Up User</button>
            <button id="signInBtn" class="btn primary">Sign In User</button>
            <button id="federatedSignInBtn" class="btn secondary">Federated Sign In</button>
            <button id="refreshTokenBtn" class="btn secondary">Refresh Token</button>
            <button id="resetBtn" class="btn danger">Reset</button>
        </div>

        <div class="architecture">
            <div class="client-section">
                <h3>Client Application</h3>
                <div class="client-box">
                    <div class="user-form">
                        <h4>User Interface</h4>
                        <div class="form-field">
                            <label>Email:</label>
                            <input type="email" id="userEmail" placeholder="user@example.com">
                        </div>
                        <div class="form-field">
                            <label>Password:</label>
                            <input type="password" id="userPassword" placeholder="••••••••">
                        </div>
                        <div class="user-status" id="userStatus">Not authenticated</div>
                    </div>
                </div>
            </div>

            <div class="cognito-section">
                <div class="user-pool">
                    <h3>Cognito User Pool</h3>
                    <div class="pool-info">
                        <div class="pool-stats">
                            <div class="stat">
                                <span class="label">Total Users:</span>
                                <span class="value" id="totalUsers">0</span>
                            </div>
                            <div class="stat">
                                <span class="label">Active Sessions:</span>
                                <span class="value" id="activeSessions">0</span>
                            </div>
                        </div>
                        <div class="user-list" id="userList">
                            <h4>Registered Users</h4>
                            <div class="users-container"></div>
                        </div>
                    </div>
                </div>

                <div class="identity-pool">
                    <h3>Cognito Identity Pool</h3>
                    <div class="identity-info">
                        <div class="identity-stats">
                            <div class="stat">
                                <span class="label">Identity Type:</span>
                                <span class="value" id="identityType">None</span>
                            </div>
                            <div class="stat">
                                <span class="label">AWS Credentials:</span>
                                <span class="value" id="awsCredentials">Not issued</span>
                            </div>
                        </div>
                        <div class="identity-providers">
                            <h4>Identity Providers</h4>
                            <div class="provider cognito-provider">Cognito User Pool</div>
                            <div class="provider social-provider">Google</div>
                            <div class="provider social-provider">Facebook</div>
                            <div class="provider social-provider">Amazon</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="aws-services">
                <h3>AWS Services</h3>
                <div class="services-grid">
                    <div class="service" id="s3Service">
                        <h4>S3</h4>
                        <div class="service-status">Access: Denied</div>
                    </div>
                    <div class="service" id="dynamoService">
                        <h4>DynamoDB</h4>
                        <div class="service-status">Access: Denied</div>
                    </div>
                    <div class="service" id="lambdaService">
                        <h4>Lambda</h4>
                        <div class="service-status">Access: Denied</div>
                    </div>
                    <div class="service" id="apiService">
                        <h4>API Gateway</h4>
                        <div class="service-status">Access: Denied</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="flow-visualization">
            <h3>Authentication Flow</h3>
            <div class="flow-steps" id="flowSteps">
                <div class="step" data-step="1">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h4>User Registration/Login</h4>
                        <p>User provides credentials to client application</p>
                    </div>
                </div>
                <div class="step" data-step="2">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h4>User Pool Authentication</h4>
                        <p>Cognito User Pool validates credentials</p>
                    </div>
                </div>
                <div class="step" data-step="3">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h4>JWT Tokens Issued</h4>
                        <p>ID Token, Access Token, and Refresh Token returned</p>
                    </div>
                </div>
                <div class="step" data-step="4">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <h4>Identity Pool Exchange</h4>
                        <p>JWT tokens exchanged for AWS credentials</p>
                    </div>
                </div>
                <div class="step" data-step="5">
                    <div class="step-number">5</div>
                    <div class="step-content">
                        <h4>AWS Service Access</h4>
                        <p>Temporary credentials used to access AWS services</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="tokens-section">
            <h3>JWT Tokens</h3>
            <div class="tokens-grid">
                <div class="token-card">
                    <h4>ID Token</h4>
                    <div class="token-content" id="idToken">Not issued</div>
                    <div class="token-info">Contains user identity information</div>
                </div>
                <div class="token-card">
                    <h4>Access Token</h4>
                    <div class="token-content" id="accessToken">Not issued</div>
                    <div class="token-info">Used for API authorization</div>
                </div>
                <div class="token-card">
                    <h4>Refresh Token</h4>
                    <div class="token-content" id="refreshToken">Not issued</div>
                    <div class="token-info">Used to obtain new tokens</div>
                </div>
            </div>
        </div>

        <div class="logs-section">
            <h3>Authentication Logs</h3>
            <div class="logs-container" id="logsContainer">
                <div class="log-entry info">
                    <span class="timestamp">Ready</span>
                    <span class="message">Cognito visualizer initialized</span>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>